<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>EmberConf 2017: Engines as an App Platform</title>

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/night.css">

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!-- Printing and PDF exports -->
    <script>
     var link = document.createElement( 'link' );
     link.rel = 'stylesheet';
     link.type = 'text/css';
     link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
     document.getElementsByTagName( 'head' )[0].appendChild( link );
    </script>
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
	<section>
          <h2>Engines as an Application Platform</h2>
          <h4 style="color:#cd6600;">Decisions in Scaling Ember Development</h4>
          <aside class="notes" data-markdown>
            ## Application Platform
            * Today I'm going to talk to you guys about using ember engines as an application platform and the tough decisions that are going to enivitably pop up when undertaking this.
            * Will largely draw upon the experiences we've had using engines to build this out.
          </aside>
        </section>
        <section>
          <h3>Application Platform</h3>
          <h4 style="color:#cd6600;">A Collection of Separate Apps</h4>
          <p class="fragment">Tied together by a single cohesive user experience.</p>
          <p class="fragment">Sharing common assets</p>
          <p class="fragment" style="color:#cd6600;font-size:17px;">At the same time</p>
          <p class="fragment">Maintaining separate business goals</p>
          <p class="fragment">Releasing on their own schedules</p>
          <p class="fragment">Having their own internal practices/standards</p>
          <aside class="notes" data-markdown>
            * Let's start with a definition so we are all on the same page.
            * Common Assets, such as services (intl, perm), components (data grids, menus), assets (icons, styles)
            * We have this situation at Genesys
          </aside>
        </section>
        <section>
          <section data-background="https://media.giphy.com/media/d2Z4rTi11c9LRita/giphy.gif">
            Engines Made Ember Win In My Company
            <aside class="notes">

            </aside>
          </section>
          <section>
            <img class="fragment" alt="" style="position:absolute;height:700px;width:1000px;max-height:900px;z-index:10;border-width:0;" src="images/heart-frame.png"/>
            <img class="fragment fade-out" style="position:relative;top:200px;border-width:0;" alt="" src="images/angular.svg" height="300px"/>
            <img alt=""  style="position:relative;top:200px;border-width:0;" src="images/emberjs.png" height="300px"/>
            <img class="fragment fade-out" style="position:relative;top:200px;border-width:0;" alt="" src="images/knockoutjs.jpg" height="300px"/>
          </section>
          <section>
            <p>Autonomy/Accountability</p>
            <p class="fragment">Namespacing</p>
            <p class="fragment">Asset Sharing</p>
            <p class="fragment">Lazy Loading</p>
            <p class="fragment">Technical Consistency</p>
          <aside class="notes">
            This is stuff you get with Engines out of the box.
          </aside>
        </section>
        </section>
        <section data-background="images/easy-button.gif">
          <h2>Easy, Right?</h2>
        </section>
        <section>But Winning Was Just the Beginning of Our Story...
          <aside class="notes">And that's what we are going to talk about today</aside>
        </section>
	<section>
          <h2>About Me</h2>
          <div style="text-align:left;margin-left:100px;">
            <div class="fragment fade-right">
              <img style="display:inline;position:relative;top:40px;"
                   alt="LTS Tomster"
                   height="100"
                   src="images/lts-tomster.png"/>
              <p style="display:inline;">Senior Dev at Genesys</p>
            </div>
            <div class="fragment fade-right">
              <img style="display:inline;position:relative;top:40px;"
                   alt="Ember Learn Team Tomster"
                   height="100"
                   src="images/teaching-tomster.png"/>
              <p style="display:inline;">Ember Learn Team</p>
            </div>
            <div class="fragment fade-right">
              <img style="display:inline;position:relative;top:40px;"
                   alt="Triangle Ember Meetup Tomster"
                   height="100"
                   src="images/sir-walter-tomster.png"/>
              <p style="display:inline;">Triangle Ember Meetup Organizer</p>
            </div>

          </div>
        </section>
        <section>
          <h3>About Our Ember App</h3>
          <a style="font-size:12px;" href="https://vimeo.com/174421457">https://vimeo.com/174421457</a>
          <aside class="notes">
            Describe briefly our story.
            <ul>
              <li>Cloud Based Customer Service Software</li>
              <li>Started as a very small startup doing Ember</li>
              <li>Acquired by a medium sized company doing Angular and Knockout</li>
              <li>We were a cloud based Directory Integrator app with realtime collaboration</li>
              <li>They had a app suite of customer service software</li>
            </ul>
          </aside>
        </section>
        <section>
          <h4>Orgspan pre Ember 1.0</h4>
          <img src="images/orgspan.png" height="500px"/>
        </section>
        <section>
        <section>
          <h4>The Genesys PureCloud Application Platform</h4>
          <img src="images/inin.png" height="500px"/>
          <aside class="notes">
            The same app exists today, but has become the UI shell to our whole customer service product suite.
          </aside>
        </section>
        <section>
          <p class="fragment">Top menu items are routable</p>
          <p style="position:fixed;left:-270px;top:300px;transform:rotate(270deg);" class="fragment">Side menu items are built-in</p>
          <img alt="" src="images/queues.png" height="500px"/>
          <aside class="notes">
            <ul>
              <li>The top menu is routable apps (engines)</li>
              <li>While the side menu are capabilities you have built into the platform</li>
            </ul>
          </aside>
        </section>
        <section>
          <img alt="" src="images/interaction-engine.png" height="500px"/>
        </section>
        <section>
          <img alt="" src="images/admin-engine.png" height="500px"/>
        </section>
        </section>
        <section>
          <h2>Some Stats</h2>
          <p class="fragment"><span class="big-number">50+</span> Ember Developers</p>
          <p class="fragment"><span class="big-number">10</span> Engines (and counting!)</p>
          <p class="fragment"><span class="big-number">2-4</span> Deployments/Month</p>
        </section>
        <section data-background="images/hold-onto-your-butts.gif">
          <h2>But...</h2>
          <p class="fragment">How did we get there?</p>
          <aside class="notes" data-markdown>
            ### Engines get you on the road to doing it well,
            but you still have to figure some things out as a UI organization.
          </aside>
        </section>
        <section data-background="images/wut-wut-wut.gif">
          <h2>...There were Questions</h2>
        </section>
        <section data-background="images/forklift-jenga.gif">
          <h2 style="color:black;">How To Avoid Breaking Each Other?</h2>
          <aside class="notes" data-markdown>
            ### The crux of most of our technical challenges
          </aside>
        </section>
        <section data-background="images/ughhh.gif">
          <h2>Managing Dependencies</h2>
          <aside class="notes" data-markdown>
            One of the biggest causes of breakages when we brought everyone together under one UI.
          </aside>
        </section>
        <section>
        <section>
          <h3>Semantic Versioning + Communication = Love</h3>
          <p class="fragment">...or at least not killing each other</p>
          <p class="fragment"><a href="http://semver.org">http://semver.org</a></p>
          <img class="fragment" src="images/cross-billy-off-the-list.gif"/>
          <aside class="notes">
            ### Many developers don't give it much thought when creating standalone apps.
            * http://semver.org
          </aside>
        </section>
        <section>
          <ul>
            <li>Prefer `^` for dependencies (Except Ember)</li>
            <li class="fragment">Lint your dependencies - ember-cli-dependency-lint</li>
            <li class="fragment">Major dependency bumps propagate up, that way the parent is in control</li>
            <li class="fragment">Make addon dependencies public</li>
            <li class="fragment">Mind your broccoli (Who's my parent?)</li>
          </ul>
          <aside class="notes" data-markdown>
            * We always want the parent to be in control to avoid breaks from children.
            * Making addon dependecies public prevent the parent from having to explicitly depend on child dependencies
            * Ember CLI treeFor tasks can't assume an NPM Tree.  When new dependencies and engines get added it can change the whole tree.
          </aside>
        </section>
        </section>
        <section>
        <section>
          <h2>Upgrading Ember</h2>
          <aside class="notes" data-markdown>
            * No big deal on a minor, right?
            * Upgrading's a big deal when you have a ton of engines that need to be in sync
          </aside>
        </section>
        <section>
          <ul>
            <li>Keep an Ember Upgrade Branch</li>
            <li class="fragment">Engines should run ember-try against release and beta (at least)</li>
            <li class="fragment">Gated by tests</li>
            <li class="fragment">Approvals from Engine Owners</li>
          </ul>
        </section>
        <section>
          We're realizing that keeping up with the beta can make Ember more semver compliant
        </section>
        </section>
        <section>
          <section data-background="images/beaker-testing.gif">
            <h2>How Do We Test?</h2>
            <aside class="notes" data-markdown>
              ## A Few Options
              * You can Push as much as possible to individual Engines
              * You can put everything at the top level
              * You can do a mix... Acceptance-Top, unit/integration at engines.
            </aside>
          </section>
          <section>
            <h3>Push Tests To Engines and Addons</h3>
            <p class="fragment">Distributes load</p>
            <p class="fragment">Keeps teams accountable</p>
            <p class="fragment">Gates Builds/Version Bumps</p>
            <aside class="notes" data-markdown>
              Requires some kind of accomodation for shared services.
            </aside>
          </section>
          <section>
            <h3>Adhere to the Test Pyramid</h3>
            <img alt="" src="images/test-pyramid.png"/>
            <p><a href="https://martinfowler.com/bliki/TestPyramid.html" style="font-size:10px">https://martinfowler.com/bliki/TestPyramid.html</a></p>
            <aside class="notes" data-markdown>
              * Higher level tests tend to require more setup and teardown.
              * They also can give you feedback later.
            </aside>
          </section>
          <!-- <section>
               <h3>Fight For Stability</h3>
               <p class="fragment">Async Cleanup (sets on destroyed)</p>
               <p class="fragment">Autorun in tests</p>
               <p class="fragment">Globals</p>
               <p class="fragment">Sets in render</p>
               <p class="fragment">SPEEEED</p>
               </section> -->
        </section>

        <section>
        <section data-background="images/cute-sharing.gif">
          <h3>How Do We Share?</h3>
          <aside class="notes">
            <ul>
              <li>Common Addons</li>
              <li>How to "Share Up" less/sass common variables(blog post?)</li>
              <li>Single vs Separate</li>
              <li>Services - you can share services from the parent, but you lose out on testing locally that way</li>
            </ul>
          </aside>
        </section>
        <section>
          <h3>Common Addons</h3>
          <p>Components - Assets - Services</p>
          <p class="fragment">Prefer common to shared</p>
          <aside class="notes">
            ### Reasons we prefer common
            * Tests
            * Main app simplicity
            * broader reuse
          </aside>
        </section>
        <section>
          <h3>Splitting Addons</h3>
          <p class="fragment">Modularity vs Simplicity</p>
          <div style="display:flex;">
          <div class="fragment" style="flex-grow:1;">
            <p style="font-size: 20px"><em>Public Addons</em></p>
            <ul style="font-size: 15px;">
              <li>ember-webrtc-devices</li>
              <li>ember-webrtc-troubleshoot</li>
              <li>ember-data-visualizations</li>
              <li>fixtable-ember</li>
            </ul>
          </div>
          <div class="fragment" style="flex-grow:1;">
            <p style="font-size: 20px"><em>Major Addons</em></p>
            <ul style="font-size: 15px;">
              <li>ember-chat-components</li>
            </ul>
          </div>
          <div class="fragment" style="flex-grow:1;">
            <p style="font-size: 20px"><em>Basic Asset Addons</em></p>
            <ul style="font-size: 15px;">
              <li>ember-purecloud-style</li>
            </ul>
          </div>
          <div class="fragment" style="flex-grow:1;">
            <p style="font-size: 20px"><em>Suites</em></p>
            <ul style="font-size: 15px;">
              <li>ember-purecloud-components</li>
              <li>ember-engage-components</li>
            </ul>
          </div>
          </div>
          <aside class="notes">
            ### The tradeoff in splitting addons
            * few, large addons are simpler for consumers to keep up with, require less dependency concerns
            * many, small addons promote easier maintenance and fine grained reuse.
            ### Public Addons
            * We want public addons to be fine grained, bc we don't know how people will want to use them.
            * Gives them a more consumable face.
            ### Major Addons
            * Have their own teams maintaining them.  May be used outside the main app.
            ### Suites
            * "Everything else"
            * Makes thing shared across the ecosystem
            * Simplifies dependency management
          </aside>
        </section>
        </section>
        <section>
          <section data-background="images/shipit.gif">
          <h2>How Do We Build and Deploy?</h2>
        </section>
        <section>
          <p>Each Engine/Addon/App should have its Own</p>
          <div style="display:flex">
            <div class="fragment" style="flex-grow:1;">
              <p style="font-size:20px;"><em>GitFlow</em></p>
              <ul style="font-size:15px">
                <li>feature branch</li>
                <li>develop</li>
                <li>release - yarn-locked</li>
                <li>master - ship</li>
              </ul>
            </div>
            <div class="fragment" style="flex-grow:1;">
              <p style="font-size:20px;"><em>Branch Deployments</em></p>
              <ul style="font-size:15px">
                <li>Each Major Branch gets deployed (release, develop, features)</li>
                <li>Engine branches get deployed for tests</li>
                <li>Ship: NPM Publish for Engines</li>
                <li>Ship: S3 Prod Deploy for App Master</li>
              </ul>
            </div>

            <div class="fragment" style="flex-grow:1;">
              <p style="font-size:20px;"><em>Automation Gates Promotion</em></p>
              <ul style="font-size:15px">
                <li>Ember suite breaks builds</li>
                <li>E2E automation gates app to prod</li>
                <li>E2E automation gates engine to publish</li>
              </ul>
            </div>
          </div>
          <aside class="notes" data-markdown>
            ### GitFlow
            http://nvie.com/posts/a-successful-git-branching-model/
          </aside>
        </section>
        </section>
        <!-- <section>
             <h2>Unified Common Services</h2>
             <p class="fragment">Internationalization</p>
             <p class="fragment">Security</p>
             <p class="fragment">Logging</p>
             <aside class="notes">
             * ember-intl -
             * ember-simple-auth
             * sumo
             * analytics
             </aside>
             </section> -->
        <section>
          <h3>What are the Next Decisions?</h3>
          <p class="fragment">Patching Engines</p>
          <p class="fragment">Managing Size</p>
          <p class="fragment">Ease of Deployment</p>
          <p class="fragment">Third Party Apps</p>
          <p class="fragment">Managing Outages</p>
        </section>
        <section data-background="images/herding-cats.gif">
          <h2>Cultural Questions</h2>
        </section>
        <section>
          <h3>How Do We Communicate Across Diverse, Global Teams?</h3>
        </section>
        <section>
        <section>
          <h3>EmberJS Chat Channel</h3>
          <img alt="" src="images/ember-chat.gif" height="500"/>
          <aside class="notes" data-markdown>
            * Each Team has their own channel
            * Every team is on the EmberJS Channel
          </aside>
        </section>
        <section>
          <p>Always Answer Questions</p>
          <p class="fragment">Share Links and New Stuff</p>
          <p class="fragment">Pitch Ideas</p>
          <p class="fragment">Garner Reviews</p>
          <p class="fragment">Gifs</p>
          <h4 class="fragment" style="color:#cd6600;">We want nobody to be on an island</h4>
        </section>
        <section>
          <img alt="" src="images/you-scratch-my-back.gif" height="400px"/>
        </section>
        </section>
        <section>
        <section>
          <h3>Best Practice Series</h3>
          <img alt="" src="images/ember-best-practices.gif" height="500"/>
        </section>
        <section data-markdown>
          ### Topics So Far

          * Components
          * Addon Development
          * Engines
          * Testing
          * Ember Data
          * NPM and Semver
          * Build and Deploy
          * The Run Loop

        </section>
        </section>
        <section>
        <section>
          <h3>Internal RFC Process</h3>
          <p class="fragment">Ripped from Ember <3</p>
          <img alt="" src="images/rfc-process.gif" height="450px"/>
        </section>
        <section data-markdown>
          * Document
          * Publicize
          * Buy-in
        </section>
        <section data-markdown>
          ### Things We Use it For

          * New Best Practices _(Testing, Upgrades)_
          * New Tooling _(introducing mirage, concurrency, etc)_

        </section>
        </section>
        <section>
          <h3>Documentation of APIs, Usage</h3>
          <p class="fragment">Inspired from last EmberConf \o/</p>
          <img alt="" src="images/pc-style-guide.gif" height="450px"/>
        </section>
        <section>
          <h3>Creating a Contribution Culture</h3>
          <ul>
            <li class="fragment">Core Team</li>
            <li class="fragment">Task Board</li>
            <li class="fragment">Detailed Tasks</li>
            <li class="fragment">Help Wanted Tags</li>
          </ul>
          <aside class="notes" data-markdown>
            * Learned some tips from my OSS Experience
            * Not going to get 100%, but make it easier for people that are motivated
            * Senior engineers set the tone
            * Continuous Delivery helps
          </aside>
        </section>
        <section data-background="images/breakfast-club-goodbye.gif">
          <h3>Thanks!</h3>

        </section>
        <section>
          <p>Twitter: @tddjordan</p>
          <p>Slack: @todd.jordan</p>
          <a href="https://toddjordan.github.io/emberconf-engines-as-app-platform/#/">https://toddjordan.github.io/emberconf-engines-as-app-platform/#/</a>
          
        </section>
      </div>
    </div>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.js"></script>

    <script>
     // More info https://github.com/hakimel/reveal.js#configuration
     Reveal.initialize({
       history: true,

       // More info https://github.com/hakimel/reveal.js#dependencies
       dependencies: [
	 { src: 'plugin/markdown/marked.js' },
	 { src: 'plugin/markdown/markdown.js' },
	 { src: 'plugin/notes/notes.js', async: true },
	 { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
       ]
     });
    </script>
  </body>
</html>
